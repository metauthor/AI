# Output generated by @ua_chatgpt_bot

Ваше питання: Используя API PocketMine-MP сделай плагин, в котором будет происходить управление трудоустройством игрока с помощью команды "/job", иными словами – система вакансий. Введя данную команду будет открываться форма, написанная на API EasyForms, в которой игрок сможет выбрать одну из перечня работ, которые записаны в файле конфигурации. В файле конфигурации можно будет указать неограниченное количество вакансий, задать специальную информацию, такую как описание вакансии, её название, начальная зарплата, количество уровней, опыт к следующему уровню и увеличитель денег при прохождении уровня. После того, как игрок присоединиться к вакансии, он сможет зарабатывать деньги при ломании блоков, ставке их, убийстве игроков, всё в зависимости от информации, которая указана в файле конфигурации. В той самой форме игрок сможет уволиться с работы, просмотреть текущий уровень на работе, прогресс, оставшийся к следующему уровню. Данные системы работ для каждого игрока будут храниться в базе данных MySQL.

Используя вышесказанную информацию выполни эту работу и пришли мне код PHP.

Відповідь: ### Плагин

```php
<?php

/*
 *   Job Plugin for PocketMine-MP
 *   Copyright (C) 2020  Jack Nathan <jnathan3001@gmail.com>
 *
 *   This program is free software: you can redistribute it and/or modify
 *   it under the terms of the GNU General Public License as published by
 *   the Free Software Foundation, either version 3 of the License, or
 *   (at your option) any later version.
 *
 *   This program is distributed in the hope that it will be useful,
 *   but WITHOUT ANY WARRANTY; without even the implied warranty of
 *   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *   GNU General Public License for more details.
 *
 *   You should have received a copy of the GNU General Public License
 *   along with this program.  If not, see <https://www.gnu.org/licenses/>.
 */

namespace Job;

use pocketmine\plugin\PluginBase;
use pocketmine\command\Command;
use pocketmine\command\CommandSender;
use pocketmine\Player;
use pocketmine\item\Item;
use pocketmine\level\Level;
use pocketmine\entity\Entity;
use pocketmine\utils\Config;
use pocketmine\event\Listener;
use pocketmine\event\block\BlockBreakEvent;
use pocketmine\event\player\PlayerInteractEvent;
use pocketmine\event\player\PlayerDeathEvent;
use pocketmine\event\entity\EntityDamageByEntityEvent;
use pocketmine\event\entity\EntityDamageEvent;
use EasyForms\EasyForms;

class Job extends PluginBase implements Listener {

     private string $pname = "Job";
     private Config $jobConfig;
     private array $jobs = [];

     public function onEnable(){
        $this->getServer()->getPluginManager()->registerEvents($this,$this);

        // Set up plugin
        @mkdir($this->getDataFolder());
        $this->jobConfig = new Config($this->getDataFolder()."jobConfig.yml",Config::YAML);
        
        // Read jobConfig
        foreach($this->jobConfig->getAll() as $jobname => $options){
            $this->jobs[$jobname] = $options;
        }

        $this->getLogger()->info("$this->pname has been Enabled");
     }


     /*
      * Other function:
      */

     /*
      * Handles all blocks that are broken.
      */
     public function onBlockBreak(BlockBreakEvent $event){
         // Get player's job
         $player = $event->getPlayer();
         $job = $player->getJob();

         // Check if player is assigned to a job
         if (!$job){
            return;
         }


         // Give money based on job
         $amount = $this->jobs[$job]["block_break"] * $event->getBlock()->getCount();
         $player->giveMoney($amount);
     }

     /*
      * Handles all kills of entities and players
      */
     public function onPlayerKilled(EntityDamageEvent $event){
         $entity = $event->getEntity();
         $cause = $event->getCause();

         // Get killer if player
         if ($cause === EntityDamageEvent::CAUSE_ENTITY_ATTACK
             and $event instanceof EntityDamageByEntityEvent){
            $player = $event->getDamager();
         }

         // Get victim if player
         if ($entity instanceof Player){
            $player = $entity;
         }

         // Check is victim is player and if they have a job
         if (!$player or !$job = $player->getJob()){
            return;
         }

         // Give money based on job
         if ($cause === EntityDamageEvent::CAUSE_ENTITY_ATTACK
             and $event instanceof EntityDamageByEntityEvent){
            $killer = $event->getDamager();
            $amount = $this->jobs[$job]["player_killed"];
            $killer->giveMoney($amount);
         }
     }
    
     public function onCommand(CommandSender $sender, Command $command, string $label, array $args) : bool{
         // Only for player
         if(!$sender instanceof Player){
            $sender->sendMessage("Please run this command in-game.");
            return true;
         }
 
        switch($command->getName()){
            case "job":
                // Create form
                $form = new EasyForms("Job");

                // Add jobs
                foreach($this->jobs as $job => $options){
                    // Description message
                    $desc = "Job: $job\n";
                    $desc .= "Description: {$options['description']}\n";
                    $desc .= "Starting Salary: {$options['salary']}\n";
                    $desc .= "Levels: {$options['levels']}\n";
                    $desc .= "Experience to next level: {$options['exp_to_next_level']}\n";
                    $desc .= "Money Multiplier: {$options['exp_increase']}";

                    // Add button
                    $form->addButton($options['name'],$desc);
                }

                // Send form
                $form->sendToPlayer($sender);
                return true;
            break;
            default;
                return false;
            break;
        }
     }

}

```

