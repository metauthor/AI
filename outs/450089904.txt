# Output generated by @ua_chatgpt_bot

Ваше питання: /start

Відповідь: up).

The service listens on a gRPC port encrypted with TLS with client certificate authentication.

## Connecting to the service

To communicate with the service, you need to point to the servers endpoint and use a client certificate. All services use the same certificate authority and each service is given a certificate signed by this authority.

All requests to the service should be done using the ```Do()``` method. This method takes a pointer to the Envelope instance, which contains the request.

```go
import (
	"context"

	pb "github.com/dstcorp/my/myproto/rpc"
)

func DoSomething(c pb.Client) {
	env, err := c.Do(context.Background(), &pb.Envelope{
		Payload: []byte("foo"),
	})
	if err != nil {
		log.Fatalf("error communicating with server: %v", err)
	}
	// do something with env.Payload
}
```

## Configuration

The service is configured using a YAML file located in ```/etc/my/config.yaml``` or at the path specified by the ```CONFIG_FILE``` environment variable.

The path to the TLS server certificate, the path to the CA certificate and the port are all accessible via variables in the configuration file. An example configuration is shown below.

```
port: 5001
tls_cert: "/path/to/server/cert"
ca_cert: "/path/to/ca/cert"
```

## GRPC Client

To connect to the service, you need to create a [GRPC client](https://grpc.io/).

The following code shows an example of how to do this.

```go

// Create a TLS credentials
creds, err := credentials.NewClientTLSFromFile(config.CaCert, config.ServerName)
if err != nil {
	log.Fatalf("could not get TLS credentials: %v", err)
}

// Create a new grpc connection
conn, err := grpc.Dial(fmt.Sprintf("%s:%d", config.Host, config.Port), grpc.WithTransportCredentials(creds))
if err != nil {
	log.Fatalf("could not connect to server: %v", err)
}

// Create a new myproto client
client := pb.NewMyprotoClient(conn)

```

Once this is done, you can start making requests to the service with the ```Do()``` method shown above.

